<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Launching App...</title>
  <style>
    body {
      background-color: black;
      color: #00ff00;
      font-family: monospace;
      padding: 20px;
    }
    .terminal {
      white-space: pre-line;
    }
  </style>
</head>
<body>
  <div class="terminal" id="terminal">Booting system...\n</div>

  <script>
    const terminal = document.getElementById('terminal');

    const apps = {
      '1': 'https://mznews.onrender.com',
      '2': 'https://thehadithdaily.onrender.com',
      '3': 'https://thirdapp.onrender.com'
    };

    function log(text) {
      terminal.innerText += text + '\n';
    }

    function getAppId() {
      const params = new URLSearchParams(window.location.search);
      return params.get('app');
    }

    async function wakeAllApps() {
      log("üîß Warming up all apps in background...\n");
      for (const [id, url] of Object.entries(apps)) {
        fetch(url, { method: 'GET', mode: 'no-cors' }).then(() => {
          log(`‚úÖ App ${id} is awake: ${url}`);
        }).catch(() => {
          log(`‚ö†Ô∏è Failed to wake App ${id}: ${url}`);
        });
      }
    }

    async function redirectToApp(appId) {
      const url = apps[appId];

      if (!url) {
        log("‚ùå Invalid app ID. Please use one of the following:");
        showInstructions();
        return;
      }

      log(`üöÄ Launching App ${appId}...`);
      log(`‚è≥ Connecting to: ${url}`);

      try {
        await fetch(url, { method: 'GET', mode: 'no-cors' });
        log("‚úÖ App is ready. Redirecting...");
        setTimeout(() => {
          window.location.href = url;
        }, 1000);
      } catch (e) {
        log("‚ö†Ô∏è Failed to connect to the app.");
      }
    }

    function showInstructions() {
      log("\n=== üìò Instructions ===");
      log("To launch an app, add ?app=1, ?app=2, or ?app=3 to the URL.");
      log("Example: https://yourdomain.com?app=1");
      log("\nAvailable Apps:");
      log("1: MZ News - https://mznews.onrender.com");
      log("2: The Hadith Daily - https://thehadithdaily.onrender.com");
      log("3: Third App - https://thirdapp.onrender.com");
    }

    // Boot Process
    const appId = getAppId();
    wakeAllApps();
    if (appId) {
      redirectToApp(appId);
    } else {
      showInstructions();
    }
  </script>
</body>
</html>
